[gd_scene load_steps=31 format=3 uid="uid://8lvqy3vv7876"]

[ext_resource type="PackedScene" uid="uid://d2t0ix0154bii" path="res://mobs/nakki_v2/archetypes/nakki_default.tscn" id="1_sovr5"]
[ext_resource type="PackedScene" uid="uid://d0bvdnhtwhjen" path="res://mobs/nakki_v2/archetypes/instakill_nakki.tscn" id="2_57t8s"]
[ext_resource type="PackedScene" uid="uid://0bej41ibbv6e" path="res://Environment/bog_rock.tscn" id="2_bi5lu"]
[ext_resource type="PackedScene" uid="uid://doaavktwaav52" path="res://mobs/nakki_v2/archetypes/nakki_dive_on_trigger.tscn" id="3_g5g6j"]
[ext_resource type="PackedScene" uid="uid://cln17kxluf0oa" path="res://mobs/nakki_v2/archetypes/nakki_emerge_on_trigger.tscn" id="4_1ww58"]
[ext_resource type="Texture2D" uid="uid://k8d0k5f2b6oo" path="res://icon.svg" id="7_vxuua"]
[ext_resource type="Script" path="res://mobs/nakki_boss/FightDirector.cs" id="8_hk11w"]
[ext_resource type="Script" path="res://mobs/nakki_v2/WakeUpNakkiTrigger.cs" id="8_pjiqu"]
[ext_resource type="PackedScene" uid="uid://dx1rgdo7tcgiw" path="res://mobs/nakki_boss/nakki_boss.tscn" id="8_wcbjp"]
[ext_resource type="PackedScene" uid="uid://1hvnb01k8tt3" path="res://mobs/nakki_boss/boss_lilypad.tscn" id="9_h6tgj"]
[ext_resource type="PackedScene" uid="uid://b4cbh5rl7pbi0" path="res://mobs/nakki_boss/lilypad_arena.tscn" id="10_ucfyn"]
[ext_resource type="Script" path="res://mobs/nakki_boss/NakkiBossMovementState.cs" id="10_uig1i"]
[ext_resource type="Script" path="res://mobs/nakki_boss/NakkiEntranceTrigger.cs" id="13_dyi2s"]
[ext_resource type="Script" path="res://mobs/nakki_boss/NakkiEntranceReset.cs" id="13_uin8e"]

[sub_resource type="Curve2D" id="Curve2D_w0l2u"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_ovfps"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_wmki6"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_r44y0"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_phpyv"]
size = Vector2(130, 130)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bs7ua"]
size = Vector2(130, 130)

[sub_resource type="Curve2D" id="Curve2D_kvgq2"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0)
}
point_count = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cpqvo"]
size = Vector2(400, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ur1bv"]
size = Vector2(10, 110)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vhdqx"]
size = Vector2(108, 36)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_otlla"]
size = Vector2(108, 36)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8w5tt"]
size = Vector2(32, 68)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1qkwj"]
size = Vector2(20, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h2di6"]
size = Vector2(14, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q1u1a"]
size = Vector2(14, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_04wjm"]
size = Vector2(20, 26)

[node name="BogTest" type="Node2D"]

[node name="Marker2D" type="Marker2D" parent="." groups=["HubSpawn", "PlayerSpawn"]]
position = Vector2(718, -41)

[node name="Näkki" parent="." instance=ExtResource("1_sovr5")]
position = Vector2(73, -27)
curve = SubResource("Curve2D_w0l2u")

[node name="InstakillNäkki" parent="." instance=ExtResource("2_57t8s")]
position = Vector2(-12, 140)
curve = SubResource("Curve2D_ovfps")

[node name="DiveNäkki" parent="." instance=ExtResource("3_g5g6j")]
position = Vector2(385, -22)
curve = SubResource("Curve2D_wmki6")

[node name="EmergeNäkki" parent="." instance=ExtResource("4_1ww58")]
position = Vector2(400, 110)
curve = SubResource("Curve2D_r44y0")

[node name="BogRock" parent="." instance=ExtResource("2_bi5lu")]
position = Vector2(75, 10)

[node name="BogRock2" parent="." instance=ExtResource("2_bi5lu")]
position = Vector2(13, 177)

[node name="TriggerSprite" type="Sprite2D" parent="."]
position = Vector2(309, 43)
scale = Vector2(0.2, 0.2)
texture = ExtResource("7_vxuua")

[node name="Trigger" type="Area2D" parent="TriggerSprite" node_paths=PackedStringArray("NakkiToTrigger")]
collision_layer = 0
monitorable = false
script = ExtResource("8_pjiqu")
NakkiToTrigger = NodePath("../../DiveNäkki")

[node name="Collider" type="CollisionShape2D" parent="TriggerSprite/Trigger"]
shape = SubResource("RectangleShape2D_phpyv")

[node name="TriggerSprite2" type="Sprite2D" parent="."]
position = Vector2(300, 120)
scale = Vector2(0.2, 0.2)
texture = ExtResource("7_vxuua")

[node name="Trigger" type="Area2D" parent="TriggerSprite2" node_paths=PackedStringArray("NakkiToTrigger")]
collision_layer = 0
monitorable = false
script = ExtResource("8_pjiqu")
NakkiToTrigger = NodePath("../../EmergeNäkki")

[node name="Collider" type="CollisionShape2D" parent="TriggerSprite2/Trigger"]
position = Vector2(0, 4.57764e-05)
shape = SubResource("RectangleShape2D_bs7ua")

[node name="BossArena" type="Node2D" parent="."]
position = Vector2(1091, -110)

[node name="FightDirector" type="Node" parent="BossArena" node_paths=PackedStringArray("Nakki", "LilypadArena", "StartPosition")]
script = ExtResource("8_hk11w")
Nakki = NodePath("../MotherNäkki")
LilypadArena = NodePath("../LilypadArena")
StartPosition = NodePath("../NakkiMovementPoints/Stage1")

[node name="ColorRect" type="ColorRect" parent="BossArena"]
offset_left = -278.0
offset_top = -92.0
offset_right = 271.0
offset_bottom = 183.0
color = Color(0.0666667, 0.0901961, 0.054902, 1)

[node name="MotherNäkki" parent="BossArena" instance=ExtResource("8_wcbjp")]
position = Vector2(-39, -27)
curve = SubResource("Curve2D_kvgq2")
DetectionGain = 0.0
DetectionDecay = 100.0

[node name="EasyStage" parent="BossArena/MotherNäkki" index="8" node_paths=PackedStringArray("NextState", "SweepAttackContainer", "SweepAttackPositions")]
NextState = NodePath("../MoveToSecondStage")
SweepAttackContainer = NodePath("../../SweepAttackContainer")
SweepAttackPositions = [NodePath("../../SweepAttackPositions/Marker2D"), NodePath("../../SweepAttackPositions/Marker2D2"), NodePath("../../SweepAttackPositions/Marker2D3")]

[node name="SecondStage" parent="BossArena/MotherNäkki" index="9" node_paths=PackedStringArray("NextState", "SweepAttackContainer", "SweepAttackPositions")]
MinAttacksBeforeNextState = 5
MaxAttacksBeforeNextState = 8
NextState = NodePath("../NakkiBossIdle")
SweepAttackContainer = NodePath("../../SweepAttackContainer")
SweepAttackPositions = [NodePath("../../SweepAttackPositions/Marker2D4"), NodePath("../../SweepAttackPositions/Marker2D5"), NodePath("../../SweepAttackPositions/Marker2D6")]

[node name="MoveToSecondStage" type="Node" parent="BossArena/MotherNäkki" node_paths=PackedStringArray("NextState", "MovementTarget")]
script = ExtResource("10_uig1i")
LilypadsToSink = ["col_1", "col_2", "col_3"]
LilypadsToRise = ["col_4", "col_5", "col_6"]
NextState = NodePath("../SecondStage")
MovementTarget = NodePath("../../NakkiMovementPoints/Stage2")

[node name="LilypadArena" parent="BossArena" instance=ExtResource("10_ucfyn")]
position = Vector2(-76, 28)

[node name="Lilypad" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
Tags = ["col_1", "row_1", "stage_1"]

[node name="Lilypad2" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(0, 26)
Tags = ["col_1", "row_2", "stage_1"]

[node name="Lilypad3" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(0, 52)
Tags = ["col_1", "row_3", "stage_1"]

[node name="Lilypad4" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(36, 0)
Tags = ["col_2", "row_1", "stage_1"]

[node name="Lilypad5" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(36, 26)
Tags = ["col_2", "row_2", "stage_1"]

[node name="Lilypad6" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(36, 52)
Tags = ["col_2", "row_3", "stage_1"]

[node name="Lilypad7" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(72, 0)
Tags = ["col_3", "row_1", "stage_1"]

[node name="Lilypad8" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(72, 26)
Tags = ["col_3", "row_2", "stage_1"]

[node name="Lilypad9" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(72, 52)
Tags = ["col_3", "row_3", "stage_1"]

[node name="Lilypad10" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(108, 0)
Tags = ["col_4", "row_1", "stage_2"]
SunkenByDefault = true

[node name="Lilypad11" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(108, 26)
Tags = ["col_4", "row_2", "stage_2"]
SunkenByDefault = true

[node name="Lilypad12" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(108, 52)
Tags = ["col_4", "row_3", "stage_2"]
SunkenByDefault = true

[node name="Lilypad13" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(144, 0)
Tags = ["col_5", "row_1", "stage_2"]
SunkenByDefault = true

[node name="Lilypad14" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(144, 26)
Tags = ["col_5", "row_2", "stage_2"]
SunkenByDefault = true

[node name="Lilypad15" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(144, 52)
Tags = ["col_5", "row_3", "stage_2"]
SunkenByDefault = true

[node name="Lilypad16" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(180, 0)
Tags = ["col_6", "row_1", "stage_2"]
SunkenByDefault = true

[node name="Lilypad17" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(180, 26)
Tags = ["col_6", "row_2", "stage_2"]
SunkenByDefault = true

[node name="Lilypad18" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
visible = false
position = Vector2(180, 52)
Tags = ["col_6", "row_3", "stage_2"]
SunkenByDefault = true

[node name="Entrance1" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(-108, 26)
Tags = ["entrance_1"]

[node name="Entrance2" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(-72, 26)
Tags = ["entrance_2"]

[node name="Entrance3" parent="BossArena/LilypadArena" instance=ExtResource("9_h6tgj")]
position = Vector2(-36, 26)
Tags = ["entrance_3"]

[node name="Walls" type="StaticBody2D" parent="BossArena"]
collision_layer = 2
collision_mask = 0

[node name="Top" type="CollisionShape2D" parent="BossArena/Walls"]
position = Vector2(0, 10)
shape = SubResource("RectangleShape2D_cpqvo")

[node name="Bottom" type="CollisionShape2D" parent="BossArena/Walls"]
position = Vector2(0, 98)
shape = SubResource("RectangleShape2D_cpqvo")

[node name="Right" type="CollisionShape2D" parent="BossArena/Walls"]
position = Vector2(127, 50)
shape = SubResource("RectangleShape2D_ur1bv")

[node name="Entrance" type="CollisionShape2D" parent="BossArena/Walls"]
position = Vector2(-148, 23)
shape = SubResource("RectangleShape2D_vhdqx")

[node name="Entrance2" type="CollisionShape2D" parent="BossArena/Walls"]
position = Vector2(-148, 85)
shape = SubResource("RectangleShape2D_otlla")

[node name="BossTrigger" type="Area2D" parent="BossArena" node_paths=PackedStringArray("NakkiToTrigger")]
position = Vector2(-74, 56)
collision_layer = 0
monitorable = false
script = ExtResource("8_pjiqu")
NakkiToTrigger = NodePath("../MotherNäkki")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossArena/BossTrigger"]
shape = SubResource("RectangleShape2D_8w5tt")
debug_color = Color(0.77031, 0.379488, 0.609039, 0.42)

[node name="SweepAttackPositions" type="Node2D" parent="BossArena"]

[node name="Marker2D" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(-76, 0)

[node name="Marker2D2" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(-39, 0)

[node name="Marker2D3" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(-3, 0)

[node name="Marker2D4" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(33, 0)

[node name="Marker2D5" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(68, 0)

[node name="Marker2D6" type="Marker2D" parent="BossArena/SweepAttackPositions"]
position = Vector2(104, 0)

[node name="SweepAttackContainer" type="Node2D" parent="BossArena"]

[node name="NakkiMovementPoints" type="Node2D" parent="BossArena"]

[node name="Stage1" type="Marker2D" parent="BossArena/NakkiMovementPoints"]
position = Vector2(-39, -27)

[node name="Stage2" type="Marker2D" parent="BossArena/NakkiMovementPoints"]
position = Vector2(68, -27)

[node name="EntranceTriggers" type="Node2D" parent="BossArena"]

[node name="EntranceReset" type="Area2D" parent="BossArena/EntranceTriggers" node_paths=PackedStringArray("LilypadArena")]
position = Vector2(-212, 54)
collision_layer = 0
monitorable = false
script = ExtResource("13_uin8e")
LilypadArena = NodePath("../../LilypadArena")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossArena/EntranceTriggers/EntranceReset"]
shape = SubResource("RectangleShape2D_1qkwj")
debug_color = Color(0.833121, 0.390466, 5.77569e-07, 0.42)

[node name="Entrance1" type="Area2D" parent="BossArena/EntranceTriggers" node_paths=PackedStringArray("LilypadToSink")]
position = Vector2(-148, 54)
collision_layer = 0
monitorable = false
script = ExtResource("13_dyi2s")
LilypadToSink = NodePath("../../LilypadArena/Entrance1")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossArena/EntranceTriggers/Entrance1"]
shape = SubResource("RectangleShape2D_h2di6")
debug_color = Color(0.624608, 0.527626, 0.199997, 0.42)

[node name="Entrance2" type="Area2D" parent="BossArena/EntranceTriggers" node_paths=PackedStringArray("LilypadToSink")]
position = Vector2(-112, 54)
collision_layer = 0
monitorable = false
script = ExtResource("13_dyi2s")
LilypadToSink = NodePath("../../LilypadArena/Entrance2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossArena/EntranceTriggers/Entrance2"]
shape = SubResource("RectangleShape2D_q1u1a")
debug_color = Color(0.623529, 0.529412, 0.2, 0.419608)

[node name="Entrance3" type="Area2D" parent="BossArena/EntranceTriggers" node_paths=PackedStringArray("LilypadToSink")]
position = Vector2(-76, 54)
collision_layer = 0
monitorable = false
script = ExtResource("13_dyi2s")
LilypadToSink = NodePath("../../LilypadArena/Entrance3")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossArena/EntranceTriggers/Entrance3"]
position = Vector2(-1, 0)
shape = SubResource("RectangleShape2D_04wjm")
debug_color = Color(0.623529, 0.529412, 0.2, 0.419608)

[editable path="BossArena/MotherNäkki"]
